# 1,2,3 더하기 (DP) — 쉽게 떠올리는 법

## 0) 내가 헷갈렸던 포인트
- “n-3 + 3 = n”이라는데,
- “3은 1+2, 2+1, 1+1+1로도 만들 수 있잖아?”
- 그러면 ‘+3’이라고 퉁치는 게 맞나? → 여기서 막힘

### 핵심 정리(중요)
이 문제에서 “+3”은
- “3을 (1+2)로 쪼갠다”는 뜻이 아니라,
- **마지막에 숫자 3 ‘한 개’를 붙인다**는 뜻이다.

즉, “마지막 항(마지막으로 더한 수)”이 3인 경우만 따로 모으는 방식이다.

---

## 1) 이 문제를 떠올리는 가장 쉬운 사고법: “마지막 한 칸”으로 나누기
n을 만드는 모든 식을 한 번에 보지 말고,
**맨 마지막에 뭐가 붙었는지**만 본다.

n을 만드는 방법은 항상 3종류 중 하나로 끝난다.

1) 마지막이 1로 끝남:  (… ) + 1  
2) 마지막이 2로 끝남:  (… ) + 2  
3) 마지막이 3로 끝남:  (… ) + 3  

여기서 중요한 사실:
- 어떤 식이 동시에 “마지막이 1”이면서 “마지막이 2”일 수는 없다.
- 따라서 이 3그룹은 **겹치지 않는(중복 없는) 분할**이다.

---

## 2) “퉁치는 게 왜 맞냐?” = 1:1 대응(짝짓기) 때문
### 마지막이 3인 경우를 예로 들면:
- n을 만드는 식 중 “마지막이 3”인 식 하나를 잡아보자:
  - 예: `1+2+1+3`  (마지막이 3)
- 여기서 마지막 3만 떼면:
  - `1+2+1` 이 남고, 이건 **n-3을 만드는 한 방법**이다.

반대로,
- n-3을 만드는 아무 식에다가
- 뒤에 **숫자 3 한 개를 붙이면**
- 무조건 n을 만드는 “마지막이 3인 식”이 된다.

즉,
- “n-3을 만드는 방법들” ↔ “n을 만드는 방법 중 마지막이 3인 것들”
이 둘은 **완벽하게 1:1로 짝이 맞는다.**

그래서:
- 마지막이 3인 경우의 수 = dp[n-3]
- 마지막이 2인 경우의 수 = dp[n-2]
- 마지막이 1인 경우의 수 = dp[n-1]

---

## 3) 그래서 점화식이 그냥 나온다
3개 그룹이 서로 안 겹치니까 그냥 합치면 끝.

dp[n] = dp[n-1] + dp[n-2] + dp[n-3]

---

## 4) “3을 1+2로 쪼개는 경우는 어디 갔냐?”
예를 들어 n에서 “… + 1 + 2”로 끝나는 식은
- 마지막이 2인 그룹(dp[n-2])에 이미 들어있다.
“… + 2 + 1”로 끝나는 식은
- 마지막이 1인 그룹(dp[n-1])에 들어있다.

즉,
- “3을 쪼갠 경우”는 ‘마지막이 3’ 그룹이 아니라
- ‘마지막이 1 또는 2’ 그룹에서 이미 카운트되고 있다.
그래서 중복/누락이 없다.

---

## 5) 손으로 검증(감 잡기): n=4
4의 모든 방법(7개):
- 1+1+1+1  (끝:1)
- 1+1+2    (끝:2)
- 1+2+1    (끝:1)
- 2+1+1    (끝:1)
- 2+2      (끝:2)
- 1+3      (끝:3)
- 3+1      (끝:1)

끝자리 기준으로 분리:
- 끝이 1: 4개 = dp[3]
- 끝이 2: 2개 = dp[2]
- 끝이 3: 1개 = dp[1]
총 4+2+1 = 7

---

## 6) 초기값(직접 세서 고정)
- dp[1] = 1  -> (1)
- dp[2] = 2  -> (1+1, 2)
- dp[3] = 4  -> (1+1+1, 1+2, 2+1, 3)

---

## 7) 다음에 이 유형을 만나면 이렇게 떠올리기
체크리스트:
1) “경우의 수” 문제다.
2) “마지막 선택(마지막 숫자)”로 그룹을 나누자.
3) 그룹들이 겹치지 않으면 더하면 된다.
4) 각 그룹은 작은 문제(dp[n-1], dp[n-2], dp[n-3])랑 1:1 대응된다.

결론:
dp[n] = dp[n-1] + dp[n-2] + dp[n-3]
